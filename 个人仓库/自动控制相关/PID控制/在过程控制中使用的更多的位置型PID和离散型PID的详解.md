## 一、位置型PID控制在过程控制中的应用

### 1. 应用场景：温度控制系统

**案例描述**：

在化工行业的反应釜温度控制中，温度的精确控制对于反应的安全性和产物的质量至关重要。通过调节加热器的功率（如蒸汽阀门的开度），来控制反应釜内的温度，使其保持在设定值。

### 2. 位置型PID控制的应用

**控制结构**：

- **测量值（PV）**：反应釜内的实际温度，由温度传感器测量。
- **设定值（SP）**：期望的温度值，由操作人员或上位系统设定。
- **控制输出（MV）**：加热器的功率或蒸汽阀门的开度。
- **误差（e(t)）**：e(t)=SP−PV

**位置型PID控制器计算**：

位置型PID控制器根据当前时刻的误差，计算出控制器的输出位置，即阀门的开度或加热器的功率。控制器的输出是一个**绝对值**，直接作用于执行器。

**算法公式**：

u(t)=Kp⋅e(t)+Ki∫0te(τ) dτ+Kdde(t)dt

- Kp：比例增益
- Ki：积分增益
- Kd：微分增益

### 3. 算法推导过程

**(1) 比例控制部分（P）**：

比例控制器输出与当前误差成正比：

uP(t)=Kp⋅e(t)

**(2) 积分控制部分（I）**：

积分控制器输出与误差的累积和成正比，消除稳态误差：

uI(t)=Ki∫0te(τ) dτ

**(3) 微分控制部分（D）**：

微分控制器输出与误差的变化率成正比，预见误差的趋势，改善系统动态响应：

uD(t)=Kdde(t)dt

**(4) 综合PID控制器输出**：

将上述三部分相加，得到位置型PID控制器的输出：

u(t)=uP(t)+uI(t)+uD(t)=Kp⋅e(t)+Ki∫0te(τ) dτ+Kdde(t)dt

### 4. 应用特点

- **直观性**：位置型PID控制器的输出直接与误差相关，适合对系统进行直接调节。
- **适用性**：广泛应用于温度、压力、液位、流量等过程控制系统。
- **实现简便**：在模拟控制器或数字控制器中容易实现。

---

## 二、离散型PID控制在过程控制中的应用

### 1. 应用场景：液位控制系统

**案例描述**：

在储罐液位控制中，需要保持液位在设定的范围内，以确保下游工艺的正常运行。通过调节进料阀门的开度，控制进入储罐的液体流量，从而控制液位。

### 2. 离散型PID控制的应用

**控制结构**：

- **测量值（PV）**：储罐的实际液位，由液位传感器测量。
- **设定值（SP）**：期望的液位值。
- **控制输出（MV）**：进料阀门的开度。
- **误差（e[k]）**：e[k]=SP−PV[k]

**为什么需要离散化**：

在现代工业控制中，控制器多为数字设备（如PLC、DCS），它们以离散的时间间隔进行采样和计算。因此，需要将连续的PID控制算法转换为适用于离散时间系统的形式。

### 3. 算法推导过程

**(1) 连续PID控制器的离散化**：

对于连续时间的PID控制器，需要将积分和微分项转换为离散时间形式。

**(2) 积分项的离散化**：

积分项可以使用矩形积分法或梯形积分法近似。

- **矩形积分法**：

∫0te(τ) dτ≈∑i=0ke[i]⋅Ts

- **梯形积分法**（更常用）：

∫0te(τ) dτ≈∫tk−1tke(τ) dτ=e[k]+e[k−1]2⋅Ts

其中，Ts 是采样周期。

**(3) 微分项的离散化**：

微分项可以使用后向差分近似。

de(t)dt≈e[k]−e[k−1]Ts

**(4) 离散PID控制器公式**：

将离散化的积分和微分项代入PID公式：

u[k]=Kp⋅e[k]+Ki⋅∑i=0ke[i]⋅Ts+Kd⋅e[k]−e[k−1]Ts

**(5) 为了便于计算，定义参数**：

- **比例项**：P=Kp⋅e[k]
- **积分项**：I=I[k−1]+Ki⋅e[k]⋅Ts
- **微分项**：D=Kd⋅e[k]−e[k−1]Ts

**(6) 综合得到离散PID控制器的递推公式**：

u[k]=P+I+D

其中：

- I[k]=I[k−1]+Ki⋅e[k]⋅Ts
- D[k]=Kd⋅e[k]−e[k−1]Ts

**(7) 实际实现时，为了避免重复计算积分项和微分项，可以使用递推公式**：

- **积分项递推**：

I[k]=I[k−1]+Ki⋅e[k]⋅Ts

- **控制器输出递推**：

u[k]=u[k−1]+Kp⋅[e[k]−e[k−1]]+Ki⋅e[k]⋅Ts+Kd⋅(e[k]−e[k−1]Ts−e[k−1]−e[k−2]Ts)⋅Ts

经过化简，可以得到更简洁的递推公式。

### 4. 应用特点

- **适用于数字控制器**：离散PID控制器适用于PLC、DCS等数字控制设备。
- **易于编程实现**：递推公式便于在编程中实现，减少计算量。
- **满足实时控制需求**：通过选择合适的采样周期，满足系统的实时控制要求。

---

## 三、比较和总结

### 1. 应用场景对比

- **位置型PID控制**：
    
    - **应用于**：模拟控制器或对采样时间要求不高的系统。
    - **特点**：控制输出为绝对值，算法直观，易于理解。
- **离散型PID控制**：
    
    - **应用于**：数字控制器（如PLC、DCS）中，需要在离散时间下进行计算的系统。
    - **特点**：控制算法离散化，适合数字信号处理，易于在计算机或微控制器中实现。

### 2. 算法实现对比

- **位置型PID**：
    
    - **连续时间计算**：适合于连续信号处理。
    - **积分和微分**：需要连续时间的积分和微分运算。
- **离散型PID**：
    
    - **离散时间计算**：基于采样数据进行计算。
    - **积分和微分**：使用数值方法近似，实现递推计算，减少计算量。

### 3. 实际应用建议

- **对于模拟系统**：如果系统是连续的，且控制器是模拟电路（如早期的模拟PID控制器），可以直接使用位置型PID控制。
    
- **对于数字系统**：在现代工业控制中，大多数系统都是数字化的，控制器以固定的采样周期工作，因此需要使用离散型PID控制器。
    
- **采样周期的选择**：采样周期应根据系统的动态特性选择，通常满足奈奎斯特采样定理，即采样频率应至少是系统最高频率的两倍。
    

---

## 四、实例演示

### 实例1：温度控制的离散型PID实现

**场景**：使用PLC控制一个加热炉的温度。

**步骤**：

1. **测量温度**：每隔Ts秒读取一次温度传感器的数据。
    
2. **计算误差**：e[k]=SP−PV[k]
    
3. **更新积分项**：I[k]=I[k−1]+Ki⋅e[k]⋅Ts
    
4. **计算微分项**：D[k]=Kd⋅e[k]−e[k−1]Ts
    
5. **计算控制输出**：u[k]=Kp⋅e[k]+I[k]+D[k]
    
6. **输出控制信号**：将u[k]发送给加热器（如调节加热功率）。
    

### 实例2：液位控制的离散型PID实现

**场景**：使用DCS系统控制储罐的液位。

**步骤**：

1. **采样液位**：每隔Ts秒读取液位传感器的数据。
    
2. **计算误差**：e[k]=SP−PV[k]
    
3. **更新积分项**：考虑积分限幅，防止积分饱和。
    
4. **计算控制输出**：使用递推公式，计算u[k]。
    
5. **输出控制信号**：调节进料阀门的开度。
    

---

## 五、总结

- **位置型PID控制**：
    
    - 适用于连续时间系统，控制输出与误差的绝对值直接相关。
    - 算法简单直观，但在数字控制器中需要离散化。
- **离散型PID控制**：
    
    - 适用于数字控制器，算法基于离散时间实现。
    - 通过数值方法近似积分和微分，实现递推计算，便于编程和实时控制。